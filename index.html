<script>
  const music = document.getElementById("bgMusic");

  function firstPopup() {
    Swal.fire({
      title: "💖 Vợ iêu của chồng đấy hởm?",
      showDenyButton: true,
      confirmButtonText: "Yes",
      denyButtonText: "No",
    }).then((result) => {
      if (result.isConfirmed) {
        music.play();
        secondPopup();
      } else if (result.isDenied) {
        Swal.fire({
          icon: "warning",
          title: "😒 Mời bạn đi ra",
          text: "Chỗ nhà chúng tôi tình cảm với nhau",
          showConfirmButton: false,
          timer: 3000
        }).then(() => {
          firstPopup(); // quay lại popup ban đầu sau 3s
        });
      }
    });
  }

  function secondPopup() {
    Swal.fire({
      title: "😍 Chồng iêu vợ nhiều lắm lắm",
      showDenyButton: true,
      confirmButtonText: "Vợ cũm iêu chồngggg",
      denyButtonText: "Vợ hum iêu chồngggg",
    }).then((result) => {
      if (result.isConfirmed) {
        showHeartButton();
      } else if (result.isDenied) {
        Swal.fire({
          icon: "error",
          title: "😡 Chọn sai gòiii",
          text: "Chọn lại choa chồng!",
        }).then(() => {
          secondPopup(); // lặp lại tới khi chọn đúng
        });
      }
    });
  }

  function showHeartButton() {
    const heart = document.createElement("div");
    heart.className = "heart-btn";
    heart.innerHTML = "❤️";
    heart.onclick = showLetter;
    document.body.appendChild(heart);
  }

  function showLetter() {
    Swal.fire({
      title: "💌 Thư gửi vợ",
      html: "Chồng iêu vợ lắm, chồng biết vợ đang buồn,<br> chồng gửi vợ ngàn cái ôm thật chặt ạaa 💕"
    });
  }

  window.onload = firstPopup;
</script>
